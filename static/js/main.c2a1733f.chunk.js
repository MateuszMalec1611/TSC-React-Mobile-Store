(this["webpackJsonpmobile-store-app"]=this["webpackJsonpmobile-store-app"]||[]).push([[0],{14:function(e,t,r){e.exports={nav:"Navigation_nav__3eI15",logo:"Navigation_logo__2wCIm",navList:"Navigation_navList__3yYy1","navList--active":"Navigation_navList--active__FNIj-",active:"Navigation_active__FIUEH",barBox:"Navigation_barBox__251y1",bar:"Navigation_bar__1OM9z","bar--active":"Navigation_bar--active__3zabO"}},35:function(e,t,r){e.exports={formOrder:"FormOrder_formOrder__6goce",success:"FormOrder_success__3IZqI",fail:"FormOrder_fail__1z-RX"}},40:function(e,t,r){e.exports={container:"Layout_container__154JR",main:"Layout_main__10IBb"}},41:function(e,t,r){e.exports={startingPage:"StartingPage_startingPage__1u4to",heroImage:"StartingPage_heroImage__1-pfE"}},42:function(e,t,r){e.exports={orderedProduct:"OrderedProduct_orderedProduct__3fzbo",titleDetail:"OrderedProduct_titleDetail__cImEZ"}},43:function(e,t,r){e.exports={profile:"Profile_profile__3WDcd",orderedBox:"Profile_orderedBox__2f250"}},53:function(e,t,r){e.exports={product:"Product_product__VwHbz",show:"Product_show__2pEeB"}},54:function(e,t,r){e.exports={loader:"Loader_loader__2UxoY","loader-roller":"Loader_loader-roller__1mutV"}},55:function(e,t,r){e.exports={products:"Products_products__3-IJd"}},56:function(e,t,r){e.exports={searchEngine:"SearchEngine_searchEngine__15MW6"}},57:function(e,t,r){e.exports={home:"Home_home__39l71"}},58:function(e,t,r){e.exports={button:"Button_button__kUC3M"}},59:function(e,t,r){e.exports={productDetail:"ProductDetail_productDetail__2Thy4"}},60:function(e,t,r){e.exports={detailsBox:"UserDetails_detailsBox__29OS1"}},92:function(e,t,r){},93:function(e,t,r){},94:function(e,t,r){"use strict";r.r(t);var c=r(0),n=r.n(c),a=r(33),i=r.n(a),s=r(15),o=r(6),l=r(97),d=r(7),u=r(3),j=r(96),b={initial:"out",animate:"in",exit:"out",variants:{in:{opacity:1,x:0},out:{opacity:1,x:"-100vw"}},transition:{type:"tween",ease:"anticipate",duration:.5}},O=r(17),h=r.n(O),p=r(26),x=r(52),f=r.n(x),v=function(){return f.a.create({baseURL:"https://mobile-store-f3806-default-rtdb.europe-west1.firebasedatabase.app"})},m="CANCEL_ORDER",_="DISPLAY_PRODUCT",y="ERROR",g="GET_PRODUCTS",N="GET_PRODUCT_DETAIL",w="GET_ORDERED_PRODUCTS",E="IS_ORDERING",P="LOADING",D="SENT_ORDER",C=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(){var c=Object(p.a)(h.a.mark((function c(n){var a,i;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,n({type:P}),c.next=4,v().get("".concat(e,".json"));case 4:if(a=c.sent,i=a.data,200===a.status){c.next=9;break}throw new Error("Failed to get data");case 9:r&&i&&i.shift(),n({type:t,payload:i}),c.next=17;break;case 13:c.prev=13,c.t0=c.catch(0),n({type:y,payload:c.t0}),alert(c.t0);case 17:case"end":return c.stop()}}),c,null,[[0,13]])})));return function(e){return c.apply(this,arguments)}}()},S=r(53),k=r.n(S),I=r(1),T=function(e){var t=e.name,r=e.img,c=e.price,n=e.id,a=e.visible,i=Object(d.g)();return Object(I.jsx)("li",{style:a?{display:"block"}:{display:"none"},onClick:function(){return i.push("/product/".concat(n))},className:k.a.product,children:Object(I.jsxs)("div",{children:[Object(I.jsxs)("article",{children:[Object(I.jsx)("h4",{children:t}),Object(I.jsxs)("p",{children:[c," $"]})]}),Object(I.jsx)("img",{src:r,alt:"1234"})]})})},R=r(54),A=r.n(R),F=function(){return Object(I.jsxs)("div",{className:A.a.loader,children:[Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{}),Object(I.jsx)("div",{})]})},L=r(55),B=r.n(L),q=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.mobileStore})),r=t.products,n=t.loading;Object(c.useEffect)((function(){e(C("/products-header",g))}),[e]);var a=r.map((function(e){return Object(I.jsx)(T,Object(u.a)({},e),e.id)}));return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)("ul",{className:B.a.products,children:n?Object(I.jsx)(F,{}):a})})},U=r(56),V=r.n(U),M=function(){var e=Object(c.useRef)(null),t=Object(o.b)(),r=Object(o.c)((function(e){return e.mobileStore.products}));return Object(I.jsx)("div",{className:V.a.searchEngine,children:Object(I.jsx)("input",{onChange:function(){var c=e.current.value,n=r.map((function(e){return e.name.toLocaleLowerCase().includes(c)?Object(u.a)(Object(u.a)({},e),{},{visible:!0}):Object(u.a)(Object(u.a)({},e),{},{visible:!1})}));t({type:_,payload:n})},ref:e,placeholder:"Search",type:"text"})})},z=r(57),Y=r.n(z),G=function(){return Object(I.jsxs)(j.a.div,Object(u.a)(Object(u.a)({},b),{},{className:Y.a.home,children:[Object(I.jsx)(M,{}),Object(I.jsx)(q,{})]}))},$=r(25),H=r(14),J=r.n(H),W=function(){var e=Object(c.useState)(!1),t=Object($.a)(e,2),r=t[0],n=t[1];window.innerWidth<768&&(document.body.style.overflow=r?"hidden":"unset");var a=function(){return n((function(e){return!e}))},i=r?"".concat(J.a.bar," ").concat(J.a["bar--active"]):"".concat(J.a.bar),o=r?"".concat(J.a.navList," ").concat(J.a["navList--active"]):"".concat(J.a.navList);return Object(I.jsxs)("nav",{className:J.a.nav,children:[Object(I.jsx)("div",{className:J.a.logo,children:Object(I.jsxs)(s.b,{to:"/home",children:["Mobile",Object(I.jsx)("span",{children:" Store"})]})}),Object(I.jsx)("div",{onClick:a,className:J.a.barBox,children:Object(I.jsx)("div",{className:i})}),Object(I.jsx)("div",{className:o,children:Object(I.jsxs)("ul",{children:[Object(I.jsx)("li",{children:Object(I.jsxs)(s.b,{onClick:a,activeClassName:J.a.active,to:"/home",children:["H",Object(I.jsx)("span",{children:"o"}),"me"]})}),Object(I.jsx)("li",{children:Object(I.jsxs)(s.b,{onClick:a,activeClassName:J.a.active,to:"/profile",children:["P",Object(I.jsx)("span",{children:"r"}),"ofile"]})}),Object(I.jsx)("li",{children:Object(I.jsxs)(s.b,{onClick:a,activeClassName:J.a.active,to:"/",exact:!0,children:["E",Object(I.jsx)("span",{children:"x"}),"it"]})})]})})]})},Z=r(40),X=r.n(Z),K=function(e){var t=e.children,r="/"!==t.props.location.pathname;return Object(I.jsxs)("div",{className:X.a.container,children:[r&&Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(W,{}),Object(I.jsx)(j.a.main,Object(u.a)(Object(u.a)({},b),{},{className:X.a.main,children:t}))]}),!r&&t]})},Q="GET_USER_DATA",ee="UPDATE_TOTAL_AMOUNT",te=function(e,t){return function(){var r=Object(p.a)(h.a.mark((function r(c){var n;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,v().put("/user/details.json",{totalAmount:e,quantityOfOrders:t});case 3:if(n=r.sent,200===n.status){r.next=7;break}throw new Error("Failed to update");case 7:c({type:ee,payload:{totalAmount:e,quantityOfOrders:t}}),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),alert(r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})));return function(e){return r.apply(this,arguments)}}()},re=r(58),ce=r.n(re),ne=function(e){var t=e.children,r=e.click,c=e.isDisabled;return Object(I.jsx)("button",{disabled:c,onClick:function(){return r?r():null},className:ce.a.button,children:t})},ae=function(e){var t=Object(c.useState)(""),r=Object($.a)(t,2),n=r[0],a=r[1],i=Object(c.useState)(!1),s=Object($.a)(i,2),o=s[0],l=s[1],d=e(n);return{value:n,handleValue:function(e){var t=e.target;return a(t.value)},handleIsTouched:function(){return l(!0)},error:!d&&o,isValid:d}},ie=r(35),se=r.n(ie),oe=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,le=function(){var e=Object(d.i)().productName,t=Object(d.g)(),r=Object(o.b)(),n=Object(o.c)((function(e){return e.mobileStore})),a=n.products,i=n.loading,s=n.sent,l=n.error,O=Object(o.c)((function(e){return e.user})),x=O.totalAmount,f=O.quantityOfOrders;Object(c.useEffect)((function(){0===(null===a||void 0===a?void 0:a.length)&&r(C("/products-header",g)),r({type:D,payload:!1})}),[r,a]);var m=ae((function(e){return""!==e.trim()})),_=m.value,N=m.handleValue,w=m.handleIsTouched,E=m.error,S=m.isValid,k=ae((function(e){return oe.test(e)})),T=k.value,R=k.handleValue,A=k.handleIsTouched,L=k.error,B=k.isValid,q=ae((function(e){return""!==e.trim()})),U=q.value,V=q.handleValue,M=q.handleIsTouched,z=q.error,Y=q.isValid,G=ae((function(e){return""!==e.trim()})),$=G.value,H=G.handleValue,J=G.handleIsTouched,W=G.error,Z=G.isValid,X=S&&B&&Y&&Z,K=E&&Object(I.jsx)("p",{children:"Please enter a valid Full Name!"}),Q=L&&Object(I.jsx)("p",{children:"Please enter a valid Email!"}),ee=z&&Object(I.jsx)("p",{children:"Please enter a valid City!"}),re=W&&Object(I.jsx)("p",{children:"Please enter a valid Postal Code!"}),ce=!X&&Object(I.jsx)("p",{children:"Please fill all required fields (*)"}),ie=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("article",{children:[Object(I.jsx)("p",{children:"You're ordering"}),Object(I.jsx)("h2",{children:e})]}),Object(I.jsxs)("form",{onSubmit:function(t){t.preventDefault();var c=a.find((function(t){return t.id===e}));delete c.visible;var n=(new Date).toLocaleString(void 0,{dateStyle:"full",timeStyle:"long"}),i={name:_,email:T,city:U,postalCode:$},s={id:"any",productInfo:Object(u.a)({},c),userData:Object(u.a)(Object(u.a)({},i),{},{date:n})},o=x+c.price,l=f+1;r(function(e){return function(){var t=Object(p.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:P}),t.next=4,v().post("/user/ordered-products.json",e);case 4:if(200===t.sent.status){t.next=8;break}throw new Error("Failed to send order");case 8:r({type:D,payload:!0}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:y,payload:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(s)),r(te(o,l))},children:[Object(I.jsxs)("label",{htmlFor:"fullname",children:["*Full Name",Object(I.jsx)("input",{onBlur:w,onChange:N,value:_,id:"fullname",type:"text"}),K]}),Object(I.jsxs)("label",{htmlFor:"email",children:["*Email",Object(I.jsx)("input",{onBlur:A,onChange:R,value:T,id:"email",type:"text"}),Q]}),Object(I.jsxs)("label",{htmlFor:"city",children:["*City",Object(I.jsx)("input",{onBlur:M,onChange:V,value:U,id:"city",type:"text"}),ee]}),Object(I.jsxs)("label",{htmlFor:"postalCode",children:["*Postal Code",Object(I.jsx)("input",{onBlur:J,onChange:H,value:$,id:"postalCode",type:"text"}),re]}),Object(I.jsx)(ne,{isDisabled:!X,children:"buy"}),ce]})]}),le=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("p",{className:se.a.success,children:"Your order has been processed"}),Object(I.jsx)(ne,{click:function(){return t.replace("/home")},children:"close"})]});return Object(I.jsxs)(j.a.div,Object(u.a)(Object(u.a)({},b),{},{className:se.a.formOrder,children:[i||s?null:ie,i?Object(I.jsx)(F,{}):null,!i&&s&&""===l?le:null,!i&&s&&""!==l?Object(I.jsx)("p",{className:se.a.fail,children:l}):null]}))},de=r(59),ue=r.n(de),je=function(){var e=Object(d.i)().productName,t=Object(o.b)(),r=Object(d.g)(),n=Object(o.c)((function(e){return e.mobileStore.productDetail}));Object(c.useEffect)((function(){t(C("/products-description/".concat(e),N,!1))}),[t,e]);return Object(I.jsxs)(j.a.div,Object(u.a)(Object(u.a)({},b),{},{className:ue.a.productDetail,children:[Object(I.jsx)("h2",{children:null===n||void 0===n?void 0:n.name}),Object(I.jsx)("img",{src:null===n||void 0===n?void 0:n.img,alt:e}),Object(I.jsxs)("article",{children:[Object(I.jsx)("h4",{children:"Price"}),Object(I.jsxs)("p",{children:[null===n||void 0===n?void 0:n.price,"$"]})]}),Object(I.jsxs)("article",{children:[Object(I.jsx)("h4",{children:"Display"}),Object(I.jsx)("p",{children:null===n||void 0===n?void 0:n.display})]}),Object(I.jsxs)("article",{children:[Object(I.jsx)("h4",{children:"Processor"}),Object(I.jsx)("p",{children:null===n||void 0===n?void 0:n.processor})]}),Object(I.jsxs)("article",{children:[Object(I.jsx)("h4",{children:"RAM"}),Object(I.jsx)("p",{children:null===n||void 0===n?void 0:n.ram})]}),Object(I.jsx)(ne,{click:function(){t({type:E,payload:!0}),r.push("/ordering/".concat(e))},children:"Order"})]}))},be=r(41),Oe=r.n(be),he=(r(92),function(){var e=Object(d.g)();return Object(I.jsxs)(j.a.header,Object(u.a)(Object(u.a)({},b),{},{className:Oe.a.startingPage,children:[Object(I.jsx)("div",{className:Oe.a.heroImage}),Object(I.jsxs)("section",{children:[Object(I.jsxs)("h1",{className:"slideInR",children:["M",Object(I.jsx)("span",{children:"o"}),"bile Store"]}),Object(I.jsx)("h3",{className:"slideInL",children:"New phone only for you"}),Object(I.jsx)("button",{className:"show",onClick:function(){return e.push("/home")},children:"checkout"})]})]}))}),pe=r(42),xe=r.n(pe),fe=function(e){var t=e.id,r=e.productInfo,c=e.userData,n=Object(o.c)((function(e){return e.mobileStore.loading})),a=Object(o.c)((function(e){return e.user})),i=a.totalAmount,s=a.quantityOfOrders,l=Object(o.b)(),d=c.date.slice(0,32),u=Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("img",{src:r.img,alt:r.name}),Object(I.jsxs)("div",{children:[Object(I.jsxs)("article",{className:xe.a.titleDetail,children:[Object(I.jsx)("h3",{children:r.name}),Object(I.jsxs)("p",{children:[r.price," $"]})]}),Object(I.jsxs)("article",{children:[Object(I.jsx)("h4",{children:"Delivery address"}),Object(I.jsxs)("p",{children:["City: ",c.city]}),Object(I.jsxs)("p",{children:["Postal Code: ",c.postalCode]})]}),Object(I.jsxs)("article",{children:[Object(I.jsx)("h4",{children:"The recipient's details"}),Object(I.jsxs)("p",{children:["Name: ",c.name]}),Object(I.jsxs)("p",{children:["emial: ",c.email]})]}),Object(I.jsxs)("article",{children:[Object(I.jsx)("h4",{children:"Date of order:"}),Object(I.jsx)("p",{children:d})]}),Object(I.jsx)(ne,{click:function(){var e=i-r.price,c=s-1;l(function(e){return function(){var t=Object(p.a)(h.a.mark((function t(r){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r({type:P}),t.next=4,v().delete("/user/ordered-products/".concat(e,".json"));case 4:if(200===t.sent.status){t.next=8;break}throw new Error("Failed to cancel the order");case 8:r({type:m,payload:e}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),r({type:y,payload:t.t0});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()}(t)),l(te(e,c))},children:"cancel the order"})]})]});return Object(I.jsx)("div",{className:xe.a.orderedProduct,children:n?Object(I.jsx)(F,{}):u})},ve=r(60),me=r.n(ve),_e=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.user})),r=t.totalAmount,n=t.quantityOfOrders;return Object(c.useEffect)((function(){e(function(){var e=Object(p.a)(h.a.mark((function e(t){var r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v().get("/user/details.json");case 3:if(r=e.sent,c=r.data,200===r.status){e.next=8;break}throw new Error("Failed to get details");case 8:t({type:Q,payload:null!==c&&void 0!==c?c:{totalAmount:0,quantityOfOrers:0}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(I.jsxs)("div",{className:me.a.detailsBox,children:[Object(I.jsxs)("article",{children:[Object(I.jsx)("h4",{children:"Total amount of orders"}),Object(I.jsxs)("p",{children:[r," $"]})]}),Object(I.jsxs)("article",{children:[Object(I.jsx)("h4",{children:"Number of orders"}),Object(I.jsx)("p",{children:n})]})]})},ye=r(43),ge=r.n(ye),Ne=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.mobileStore.orderedProducts}));Object(c.useEffect)((function(){e(C("/user/ordered-products",w,!1))}),[e]);var r=null===t||void 0===t?void 0:t.map((function(e){return Object(I.jsx)(fe,Object(u.a)({},e),e.id)}));return Object(I.jsxs)(j.a.div,Object(u.a)(Object(u.a)({},b),{},{className:ge.a.profile,children:[Object(I.jsxs)("h2",{children:["Your O",Object(I.jsx)("span",{children:"r"}),"ders"]}),Object(I.jsx)(_e,{}),Object(I.jsx)("div",{className:ge.a.orderedBox,children:0!==t.length?r:Object(I.jsx)("p",{children:"You have not placed any orders yet :/"})})]}))},we=function(){var e=Object(d.h)(),t=Object(o.c)((function(e){return e.mobileStore.isOrdering}));return Object(I.jsx)(l.a,{exitBeforeEnter:!0,children:Object(I.jsx)(K,{children:Object(I.jsxs)(d.d,{location:e,children:[Object(I.jsx)(d.b,{path:"/",exact:!0,children:Object(I.jsx)(he,{})}),Object(I.jsx)(d.b,{path:"/home",children:Object(I.jsx)(G,{})}),Object(I.jsx)(d.b,{path:"/product/:productName",children:Object(I.jsx)(je,{})}),Object(I.jsx)(d.b,{path:"/ordering/:productName",children:t?Object(I.jsx)(le,{}):Object(I.jsx)(d.a,{to:"/home"})}),Object(I.jsx)(d.b,{path:"/profile",children:Object(I.jsx)(Ne,{})}),Object(I.jsx)(d.b,{path:"*",children:Object(I.jsx)("p",{children:"not found"})})]})})})},Ee=r(31),Pe=r(61),De=function(e){if(e){for(var t=[],r=0,c=Object.entries(e);r<c.length;r++){var n=Object($.a)(c[r],2),a=n[0],i=n[1];t.push({id:a,productInfo:i.productInfo,userData:i.userData})}return t}},Ce={products:[],orderedProducts:[],isOrdering:!1,loading:!1,sent:!1,error:""},Se=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case m:var c=t.orderedProducts.filter((function(e){return e.id!==r.payload}));return Object(u.a)(Object(u.a)({},t),{},{loading:!1,orderedProducts:c});case _:return Object(u.a)(Object(u.a)({},t),{},{products:r.payload});case y:return Object(u.a)(Object(u.a)({},t),{},{loading:!1});case g:return Object(u.a)(Object(u.a)({},t),{},{loading:!1,products:r.payload});case N:return Object(u.a)(Object(u.a)({},t),{},{loading:!1,productDetail:r.payload});case w:var n=De(r.payload);return Object(u.a)(Object(u.a)({},t),{},{loading:!1,orderedProducts:null!==(e=n)&&void 0!==e?e:[]});case E:return Object(u.a)(Object(u.a)({},t),{},{isOrdering:r.payload});case P:return Object(u.a)(Object(u.a)({},t),{},{loading:!0});case D:return Object(u.a)(Object(u.a)({},t),{},{loading:!1,sent:r.payload});default:return t}},ke={totalAmount:0,quantityOfOrders:0},Ie=function(){var e,t,r,c,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case Q:return{totalAmount:null!==(e=a.payload.totalAmount)&&void 0!==e?e:0,quantityOfOrders:null!==(t=a.payload.quantityOfOrders)&&void 0!==t?t:0};case ee:return{totalAmount:null!==(r=a.payload.totalAmount)&&void 0!==r?r:0,quantityOfOrders:null!==(c=a.payload.quantityOfOrders)&&void 0!==c?c:0};default:return n}},Te=Object(Ee.combineReducers)({mobileStore:Se,user:Ie}),Re=r(62),Ae=Object(Ee.createStore)(Te,Object(Pe.composeWithDevTools)(Object(Ee.applyMiddleware)(Re.a)));r(93);i.a.render(Object(I.jsx)(s.a,{basename:"/-TS-React-Mobile-Store",children:Object(I.jsx)(n.a.StrictMode,{children:Object(I.jsx)(o.a,{store:Ae,children:Object(I.jsx)(we,{})})})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.c2a1733f.chunk.js.map